<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Lemon - Unified Plan</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            sage: { 50: '#f6f7f4', 100: '#e8ebe3', 200: '#d4dac9', 300: '#b5c0a5', 400: '#94a47f', 500: '#778a62', 600: '#5d6e4d' },
            warm: { 50: '#fefcf9', 100: '#fdf8f0', 200: '#faf0df', 300: '#f5e4c8' },
            lemon: { 50: '#fefce8', 100: '#fef9c3', 400: '#fcd34d', 500: '#fbbf24' }
          }
        }
      }
    }
  </script>
  <style>
    * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 0; background: #f5f5f0; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    @keyframes slide-up { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .slide-up { animation: slide-up 0.25s ease-out; }
    @keyframes check-pop { 0% { transform: scale(0); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
    .check-pop { animation: check-pop 0.25s ease-out; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
    .pulse { animation: pulse 2s ease-in-out infinite; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useRef } = React;

    // Icons
    const Icons = {
      Leaf: () => <svg viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6"><path d="M17 8C8 10 5.9 16.17 3.82 21.34l1.89.66.95-2.3c.48.17.98.3 1.34.3C19 20 22 3 22 3c-1 2-8 2.25-13 3.25S2 11.5 2 13.5s1.75 3.75 1.75 3.75C7 8 17 8 17 8z"/></svg>,
      Flame: () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>,
      Check: () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>,
      X: () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
      Target: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>,
      Heart: () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>,
      Dumbbell: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m6.5 6.5 11 11M21 21l-1-1M3 3l1 1M18 22l4-4M2 6l4-4M3 10l7-7M14 21l7-7"/></svg>,
      Footprints: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z"/><path d="M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z"/></svg>,
      Moon: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>,
      Trophy: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
      ThumbsUp: () => <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M7 10v12"/><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"/></svg>,
      ThumbsDown: () => <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17 14V2"/><path d="M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z"/></svg>,
      Utensils: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg>,
      Apple: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z"/><path d="M10 2c1 .5 2 2 2 5"/></svg>,
      MapPin: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
      Leaf2: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></svg>,
      Plus: () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" x2="12" y1="5" y2="19"/><line x1="5" x2="19" y1="12" y2="12"/></svg>,
      Play: () => <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>,
      Star: () => <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
      Award: () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/></svg>,
    };

    // Initial plan items with thumbnails
    const INITIAL_PLAN = [
      { id: 'plan-1', title: '15-min bodyweight workout', time: 'Morning · 15 min', icon: 'Dumbbell', bgColor: 'bg-amber-100 text-amber-600', thumb: 'https://images.unsplash.com/photo-1534258936925-c58bed479fcb?w=100&q=80' },
      { id: 'plan-2', title: 'Post-lunch walk', time: 'Afternoon · 15 min', icon: 'Footprints', bgColor: 'bg-emerald-100 text-emerald-600', thumb: 'https://images.unsplash.com/photo-1476480862126-209bfaa8edc8?w=100&q=80' },
      { id: 'user-1', title: 'Morning stretch routine', time: 'Morning · 10 min', icon: 'Heart', bgColor: 'bg-rose-100 text-rose-600', thumb: 'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=100&q=80' },
    ];

    // Exploration categories (filters)
    const EXPLORATION_FILTERS = {
      movement: {
        name: 'Movement',
        activeColor: 'bg-amber-500 text-white',
        activities: [
          { id: 'm1', title: '7-min hip mobility', desc: 'Improve flexibility...', video: '07:00', thumb: 'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=200&q=80', friends: 3 },
          { id: 'm2', title: '10-min stretch', desc: 'Wake up your body...', video: '10:00', thumb: 'https://images.unsplash.com/photo-1518611012118-696072aa579a?w=200&q=80', friends: 5 },
          { id: 'm3', title: 'HIIT circuit', desc: 'High intensity...', video: '15:00', thumb: 'https://images.unsplash.com/photo-1534258936925-c58bed479fcb?w=200&q=80', friends: 2 },
          { id: 'm4', title: 'Post-lunch walk', desc: 'Boost afternoon energy...', video: '12:30', thumb: 'https://images.unsplash.com/photo-1476480862126-209bfaa8edc8?w=200&q=80', friends: 7 },
        ]
      },
      nutrition: {
        name: 'Nutrition',
        activeColor: 'bg-green-500 text-white',
        activities: [
          { id: 'n1', title: 'Protein breakfast', desc: '30g+ protein start...', video: '05:20', thumb: 'https://images.unsplash.com/photo-1525351484163-7529414344d8?w=200&q=80', friends: 4 },
          { id: 'n2', title: 'Hydration habits', desc: 'Drink more naturally...', video: '04:15', thumb: 'https://images.unsplash.com/photo-1548839140-29a749e1cf4d?w=200&q=80', friends: 8 },
          { id: 'n3', title: 'Smart snacking', desc: 'Under 200 calories...', video: '06:00', thumb: 'https://images.unsplash.com/photo-1490474418585-ba9bad8fd0ea?w=200&q=80', friends: 3 },
        ]
      },
      relaxation: {
        name: 'Relaxation',
        activeColor: 'bg-teal-500 text-white',
        activities: [
          { id: 'r1', title: 'Box breathing', desc: '4-4-4-4 technique...', video: '04:00', thumb: 'https://images.unsplash.com/photo-1506126613408-eca07ce68773?w=200&q=80', friends: 12 },
          { id: 'r2', title: 'Body scan', desc: 'Release tension...', video: '10:00', thumb: 'https://images.unsplash.com/photo-1508672019048-805c876b67e2?w=200&q=80', friends: 6 },
          { id: 'r3', title: 'Gratitude journal', desc: 'Transform mindset...', video: '05:00', thumb: 'https://images.unsplash.com/photo-1517842645767-c639042777db?w=200&q=80', friends: 4 },
        ]
      },
      sleep: {
        name: 'Sleep',
        activeColor: 'bg-indigo-500 text-white',
        activities: [
          { id: 's1', title: 'Wind-down routine', desc: 'Prepare for rest...', video: '15:00', thumb: 'https://images.unsplash.com/photo-1511295742362-92c96b1cf484?w=200&q=80', friends: 9 },
          { id: 's2', title: '4-7-8 breathing', desc: 'Fall asleep faster...', video: '03:00', thumb: 'https://images.unsplash.com/photo-1531353826977-0941b4779a1c?w=200&q=80', friends: 15 },
          { id: 's3', title: 'Screen-free hour', desc: 'Disconnect tips...', video: '04:30', thumb: 'https://images.unsplash.com/photo-1515894203077-9cd36032142f?w=200&q=80', friends: 3 },
        ]
      },
    };

    // Classes, Challenges, Meal Plan
    const CLASSES_NEARBY = [
      { id: 'cl1', title: 'Yoga at CorePower', time: '6:00 PM', distance: '0.3 mi', thumb: 'https://images.unsplash.com/photo-1599901860904-17e6ed7083a0?w=200&q=80' },
      { id: 'cl2', title: 'Spin at SoulCycle', time: '7:30 AM', distance: '0.5 mi', thumb: 'https://images.unsplash.com/photo-1534787238916-9ba6764efd4f?w=200&q=80' },
      { id: 'cl3', title: 'Pilates at Equinox', time: '12:00 PM', distance: '1.2 mi', thumb: 'https://images.unsplash.com/photo-1518611012118-696072aa579a?w=200&q=80' },
    ];

    const CHALLENGES = [
      { id: 'ch1', title: 'Hydration Week', duration: '7 days', progress: 3 },
      { id: 'ch2', title: 'Morning Movement', duration: '14 days', progress: 0 },
    ];

    const MEAL_PLANS = [
      { id: 'mp1', title: 'Mediterranean Week', desc: 'Heart-healthy meals', thumb: 'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=200&q=80', meals: 21 },
      { id: 'mp2', title: 'High Protein Plan', desc: 'Build muscle & stay full', thumb: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=200&q=80', meals: 14 },
      { id: 'mp3', title: 'Quick & Easy', desc: '15-min prep max', thumb: 'https://images.unsplash.com/photo-1498837167922-ddd27525d352?w=200&q=80', meals: 7 },
    ];

    // Carousel Card Component
    function CarouselCard({ activity, onAdd, isInPlan }) {
      return (
        <div className="flex-shrink-0 w-48 bg-white rounded-2xl border border-gray-100 overflow-hidden shadow-sm">
          <div className="relative h-28 bg-gray-200">
            <img src={activity.thumb} alt="" className="w-full h-full object-cover" />
            <div className="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent" />
            <div className="absolute top-2 right-2 flex gap-1">
              <button className="w-7 h-7 bg-white/90 rounded-full flex items-center justify-center text-rose-400 hover:bg-white">
                <Icons.Heart />
              </button>
              {isInPlan ? (
                <span className="w-7 h-7 bg-sage-500 rounded-full flex items-center justify-center text-white">
                  <Icons.Check />
                </span>
              ) : (
                <button onClick={onAdd} className="w-7 h-7 bg-sage-500 rounded-full flex items-center justify-center text-white active:scale-95">
                  <Icons.Plus />
                </button>
              )}
            </div>
            <div className="absolute bottom-2 left-2 flex items-center gap-2">
              <div className="w-6 h-6 bg-white/90 rounded-full flex items-center justify-center">
                <Icons.Play />
              </div>
              <span className="text-white text-xs font-medium bg-black/50 px-1.5 py-0.5 rounded">{activity.video}</span>
            </div>
          </div>
          <div className="p-3">
            <p className="font-semibold text-gray-800 text-sm">{activity.title}</p>
            <p className="text-xs text-gray-500 mt-0.5">{activity.desc}</p>
            <div className="flex items-center justify-between mt-2">
              <div className="flex items-center gap-1 text-gray-400">
                <Icons.ThumbsUp />
                <Icons.ThumbsDown />
              </div>
              {activity.friends > 0 && (
                <span className="text-xs text-gray-400">{activity.friends} friends</span>
              )}
            </div>
          </div>
        </div>
      );
    }

    // Main App
    function App() {
      const [myPlan, setMyPlan] = useState(INITIAL_PLAN);
      const [completedIds, setCompletedIds] = useState(new Set());
      const [showStepsNudge, setShowStepsNudge] = useState(true);
      const [activeFilter, setActiveFilter] = useState('movement');

      const streakCount = 5;
      const userLevel = 'Gold';
      const xpPoints = 2450;

      const removeFromPlan = (id) => setMyPlan(prev => prev.filter(a => a.id !== id));

      const addToPlan = (activity, categoryKey) => {
        if (myPlan.some(a => a.id === activity.id)) return;
        const bgColors = { movement: 'bg-amber-100 text-amber-600', nutrition: 'bg-green-100 text-green-600', relaxation: 'bg-teal-100 text-teal-600', sleep: 'bg-indigo-100 text-indigo-600', classes: 'bg-rose-100 text-rose-600', meal: 'bg-orange-100 text-orange-600' };
        const icons = { movement: 'Dumbbell', nutrition: 'Apple', relaxation: 'Leaf2', sleep: 'Moon', classes: 'MapPin', meal: 'Utensils' };
        setMyPlan(prev => [...prev, {
          id: activity.id,
          title: activity.title,
          time: activity.video || activity.time || '',
          icon: icons[categoryKey] || 'Target',
          bgColor: bgColors[categoryKey] || 'bg-gray-100 text-gray-600',
          thumb: activity.thumb,
        }]);
      };

      const toggleComplete = (id) => {
        setCompletedIds(prev => {
          const newSet = new Set(prev);
          newSet.has(id) ? newSet.delete(id) : newSet.add(id);
          return newSet;
        });
      };

      const planItemIds = new Set(myPlan.map(a => a.id));

      return (
        <div className="min-h-screen bg-warm-50 max-w-md mx-auto pb-8">
          {/* Hero Image Header */}
          <div className="relative">
            <div
              className="h-56 bg-cover bg-center relative overflow-hidden"
              style={{ backgroundImage: `url('https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=800&q=80')` }}
            >
              <div className="absolute inset-0 bg-gradient-to-b from-sage-600/30 via-transparent to-sage-900/70" />

              {/* Top bar with logo */}
              <div className="absolute top-0 left-0 right-0 px-5 pt-12 flex items-center justify-between">
                <div className="flex items-center gap-2">
                  <span className="text-white drop-shadow-lg"><Icons.Leaf /></span>
                  <span className="text-lg font-semibold text-white drop-shadow-lg">Lemon</span>
                </div>
                {/* Badge/Level */}
                <div className="flex items-center gap-1.5 bg-gradient-to-r from-amber-400 to-yellow-500 px-2.5 py-1 rounded-full">
                  <Icons.Star />
                  <span className="text-xs font-bold text-amber-900">{userLevel}</span>
                </div>
              </div>

              {/* Greeting with streak in same row */}
              <div className="absolute bottom-0 left-0 right-0 px-5 pb-5">
                <p className="text-white/80 text-sm mb-1 drop-shadow">Good morning</p>
                <div className="flex items-center justify-between">
                  <h1 className="text-3xl font-semibold text-white drop-shadow-lg">Maiu</h1>
                  <div className="flex items-center gap-3">
                    {/* Streak */}
                    <div className="flex items-center gap-1.5 bg-white/20 backdrop-blur-md px-3 py-1.5 rounded-full border border-white/20">
                      <span className="text-amber-300"><Icons.Flame /></span>
                      <span className="text-sm font-medium text-white">{streakCount}</span>
                    </div>
                    {/* XP */}
                    <div className="flex items-center gap-1.5 bg-white/20 backdrop-blur-md px-3 py-1.5 rounded-full border border-white/20">
                      <span className="text-purple-300"><Icons.Award /></span>
                      <span className="text-sm font-medium text-white">{xpPoints.toLocaleString()}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          {/* Let's make today count */}
          <div className="mx-5 mb-3 mt-4">
            <h2 className="font-semibold text-gray-800">Let's make today count ✨</h2>
          </div>

          {/* Steps Nudge */}
          {showStepsNudge && (
            <div className="mx-5 mb-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-4 border border-blue-100 slide-up">
              <div className="flex items-start gap-3">
                <div className="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center text-blue-500 flex-shrink-0">
                  <Icons.Footprints />
                </div>
                <div className="flex-1">
                  <div className="flex items-center justify-between mb-1">
                    <p className="font-medium text-gray-800 text-sm">You're at 3,200 steps</p>
                    <button onClick={() => setShowStepsNudge(false)} className="text-gray-400 hover:text-gray-600"><Icons.X /></button>
                  </div>
                  <p className="text-xs text-gray-500 mb-2">A short walk could get you to 5,000!</p>
                  <div className="w-full h-2 bg-blue-100 rounded-full overflow-hidden mb-3">
                    <div className="h-full bg-gradient-to-r from-blue-400 to-cyan-400 rounded-full" style={{ width: '64%' }} />
                  </div>
                  <button onClick={() => { addToPlan({ id: 'walk', title: '15-min walk', video: '15 min', thumb: 'https://images.unsplash.com/photo-1476480862126-209bfaa8edc8?w=100&q=80' }, 'movement'); setShowStepsNudge(false); }} className="text-xs bg-blue-500 text-white px-3 py-1.5 rounded-lg font-medium">
                    Add 15-min walk
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Today's Plan - Card style with thumbnails */}
          <div className="mx-5 mb-4">
            <div className="flex items-center gap-2 mb-3">
              <span className="text-sage-500"><Icons.Target /></span>
              <h2 className="font-semibold text-gray-800">Today's Plan</h2>
            </div>

            {myPlan.length > 0 ? (
              <div className="space-y-2">
                {myPlan.map((activity) => {
                  const IconComponent = Icons[activity.icon];
                  const isCompleted = completedIds.has(activity.id);
                  return (
                    <div key={activity.id} className={`bg-white rounded-2xl border border-gray-100 overflow-hidden shadow-sm ${isCompleted ? 'opacity-60' : ''}`}>
                      <div className="flex items-center gap-3 p-3">
                        {/* Thumbnail */}
                        <div className="relative w-16 h-12 rounded-xl overflow-hidden flex-shrink-0 bg-gray-200">
                          <img src={activity.thumb} alt="" className="w-full h-full object-cover" />
                          {!isCompleted && (
                            <div className="absolute inset-0 bg-black/20 flex items-center justify-center">
                              <div className="w-6 h-6 bg-white/90 rounded-full flex items-center justify-center">
                                <Icons.Play />
                              </div>
                            </div>
                          )}
                        </div>

                        {/* Checkbox */}
                        <button onClick={() => toggleComplete(activity.id)} className={`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-all ${isCompleted ? 'bg-sage-500 border-sage-500' : 'border-gray-300'}`}>
                          {isCompleted && <span className="text-white check-pop"><Icons.Check /></span>}
                        </button>

                        {/* Content */}
                        <div className="flex-1 min-w-0">
                          <p className={`font-medium text-sm ${isCompleted ? 'text-gray-400 line-through' : 'text-gray-800'}`}>{activity.title}</p>
                          <p className="text-xs text-gray-400">{activity.time}</p>
                        </div>

                        {/* Actions */}
                        <div className="flex items-center gap-1">
                          <button className="text-gray-300 hover:text-rose-400"><Icons.Heart /></button>
                          <button onClick={() => removeFromPlan(activity.id)} className="text-gray-300 hover:text-red-400"><Icons.X /></button>
                        </div>
                      </div>
                    </div>
                  );
                })}
                <p className="text-xs text-gray-400 text-center mt-2">
                  tap <span className="inline-flex items-center justify-center w-4 h-4 bg-sage-100 rounded-full text-sage-500 mx-0.5"><Icons.Plus /></span> to add
                </p>
              </div>
            ) : (
              <div className="bg-white rounded-2xl border border-gray-100 p-8 text-center shadow-sm">
                <p className="text-gray-400 text-sm">Tap activities below to build your plan</p>
              </div>
            )}
          </div>

          {/* Exploration Section */}
          <div className="mb-4">
            <div className="flex items-center gap-2 mb-3 px-5">
              <span className="text-sage-500"><Icons.Target /></span>
              <h2 className="font-semibold text-gray-800">Exploration</h2>
            </div>

            {/* Spotify-style filter pills */}
            <div className="flex gap-2 mb-4 px-5 overflow-x-auto hide-scrollbar">
              {Object.entries(EXPLORATION_FILTERS).map(([key, filter]) => (
                <button
                  key={key}
                  onClick={() => setActiveFilter(key)}
                  className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${
                    activeFilter === key
                      ? filter.activeColor
                      : 'bg-white border border-gray-200 text-gray-700'
                  }`}
                >
                  {filter.name}
                </button>
              ))}
            </div>

            {/* Carousel of activities */}
            <div className="flex gap-3 px-5 overflow-x-auto hide-scrollbar pb-2">
              {EXPLORATION_FILTERS[activeFilter]?.activities.map(activity => (
                <CarouselCard
                  key={activity.id}
                  activity={activity}
                  onAdd={() => addToPlan(activity, activeFilter)}
                  isInPlan={planItemIds.has(activity.id)}
                />
              ))}
            </div>
          </div>

          {/* Classes Nearby */}
          <div className="mb-4">
            <div className="flex items-center gap-2 mb-3 px-5">
              <span className="text-rose-500"><Icons.MapPin /></span>
              <h2 className="font-semibold text-gray-800">Classes Nearby</h2>
            </div>
            <div className="flex gap-3 px-5 overflow-x-auto hide-scrollbar">
              {CLASSES_NEARBY.map(cls => (
                <div key={cls.id} className="flex-shrink-0 w-48 bg-white rounded-2xl border border-gray-100 overflow-hidden shadow-sm">
                  <div className="h-28 bg-gray-200 relative">
                    <img src={cls.thumb} alt="" className="w-full h-full object-cover" />
                  </div>
                  <div className="p-3">
                    <p className="font-medium text-sm text-gray-800 leading-tight">{cls.title}</p>
                    <p className="text-xs text-gray-500 mt-1">{cls.time} · {cls.distance}</p>
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Challenges */}
          <div className="mb-4">
            <div className="flex items-center gap-2 mb-3 px-5">
              <span className="text-purple-500"><Icons.Trophy /></span>
              <h2 className="font-semibold text-gray-800">Challenges</h2>
            </div>
            <div className="flex gap-3 px-5 overflow-x-auto hide-scrollbar">
              {CHALLENGES.map(ch => (
                <div key={ch.id} className="flex-shrink-0 w-48 bg-white rounded-2xl border-2 border-purple-200 p-3">
                  <span className="text-xs text-purple-500 font-medium">{ch.duration}</span>
                  <p className="font-medium text-sm text-gray-800 mt-1">{ch.title}</p>
                  <div className="w-full h-1.5 bg-purple-100 rounded-full overflow-hidden mt-2 mb-1">
                    <div className="h-full bg-purple-400 rounded-full" style={{ width: `${(ch.progress / parseInt(ch.duration)) * 100}%` }} />
                  </div>
                  <p className="text-xs text-gray-400">{ch.progress > 0 ? `Day ${ch.progress}` : 'Start'}</p>
                </div>
              ))}
            </div>
          </div>

          {/* Meal Plan */}
          <div className="mb-4">
            <div className="flex items-center gap-2 mb-3 px-5">
              <span className="text-orange-500"><Icons.Utensils /></span>
              <h2 className="font-semibold text-gray-800">Meal Plan</h2>
            </div>
            <div className="flex gap-3 px-5 overflow-x-auto hide-scrollbar">
              {MEAL_PLANS.map(mp => (
                <div key={mp.id} className="flex-shrink-0 w-48 bg-white rounded-2xl border border-gray-100 overflow-hidden shadow-sm">
                  <div className="h-28 bg-gray-200 relative">
                    <img src={mp.thumb} alt="" className="w-full h-full object-cover" />
                  </div>
                  <div className="p-3">
                    <p className="font-medium text-sm text-gray-800">{mp.title}</p>
                    <p className="text-xs text-gray-500 mt-0.5">{mp.desc}</p>
                    <p className="text-xs text-orange-500 font-medium mt-1">{mp.meals} meals</p>
                    <button className="w-full mt-2 py-1.5 bg-sage-500 text-white text-xs font-medium rounded-lg active:scale-95">
                      Create Plan
                    </button>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
