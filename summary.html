<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Lemon - Monthly Summary (Light)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            sage: { 50: '#f6f7f4', 100: '#e8ebe3', 200: '#d4dac9', 300: '#b5c0a5', 400: '#94a47f', 500: '#778a62', 600: '#5d6e4d' },
            warm: { 50: '#fefcf9', 100: '#fdf8f0', 200: '#faf0df', 300: '#f5e4c8' },
            lemon: { 50: '#fefce8', 100: '#fef9c3', 400: '#fcd34d', 500: '#fbbf24' }
          }
        }
      }
    }
  </script>
  <style>
    * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 0; background: #fafaf8; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    @keyframes slide-up { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .slide-up { animation: slide-up 0.5s ease-out; }
    .slide-up-delay-1 { animation: slide-up 0.5s ease-out 0.1s both; }
    .slide-up-delay-2 { animation: slide-up 0.5s ease-out 0.2s both; }
    .slide-up-delay-3 { animation: slide-up 0.5s ease-out 0.3s both; }
    .slide-up-delay-4 { animation: slide-up 0.5s ease-out 0.4s both; }

    @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
    .fade-in { animation: fade-in 0.4s ease-out; }

    @keyframes pop { 0% { transform: scale(0.8); opacity: 0; } 50% { transform: scale(1.05); } 100% { transform: scale(1); opacity: 1; } }
    .pop { animation: pop 0.4s ease-out; }
    .pop-delay-1 { animation: pop 0.4s ease-out 0.15s both; }
    .pop-delay-2 { animation: pop 0.4s ease-out 0.3s both; }
    .pop-delay-3 { animation: pop 0.4s ease-out 0.45s both; }

    @keyframes number-pop {
      0% { transform: scale(0.5); opacity: 0; }
      60% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }
    .number-pop { animation: number-pop 0.6s ease-out; }

    @keyframes check-pop { 0% { transform: scale(0); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
    .check-pop { animation: check-pop 0.3s ease-out; }

    .gradient-text {
      background: linear-gradient(135deg, #778a62 0%, #5d6e4d 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;

    // Icons
    const Icons = {
      Leaf: () => <svg viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6"><path d="M17 8C8 10 5.9 16.17 3.82 21.34l1.89.66.95-2.3c.48.17.98.3 1.34.3C19 20 22 3 22 3c-1 2-8 2.25-13 3.25S2 11.5 2 13.5s1.75 3.75 1.75 3.75C7 8 17 8 17 8z"/></svg>,
      ChevronRight: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m9 18 6-6-6-6"/></svg>,
      ChevronLeft: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m15 18-6-6 6-6"/></svg>,
      X: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
      Share: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>,
      Trophy: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
      Flame: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>,
      Footprints: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z"/><path d="M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z"/></svg>,
      Dumbbell: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m6.5 6.5 11 11M21 21l-1-1M3 3l1 1M18 22l4-4M2 6l4-4M3 10l7-7M14 21l7-7"/></svg>,
      Zap: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
      Moon: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>,
      Heart: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>,
      Scale: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="M7 21h10"/><path d="M12 3v18"/><path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"/></svg>,
      Sparkles: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>,
      TrendingUp: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>,
      TrendingDown: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/><polyline points="16 17 22 17 22 11"/></svg>,
      ArrowRight: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="5" x2="19" y1="12" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,
      Calendar: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="18" height="18" x="3" y="4" rx="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>,
      Check: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>,
      Target: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>,
      Utensils: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg>,
      Sun: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></svg>,
      Wind: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2M9.6 4.6A2 2 0 1 1 11 8H2M12.6 19.4A2 2 0 1 0 14 16H2"/></svg>,
      Droplet: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/></svg>,
      Clock: () => <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
    };

    // Data
    const SUMMARY_DATA = {
      month: 'January',
      nextMonth: 'February',
      stats: {
        activities: { value: 47, change: 12, unit: '' },
        avgSteps: { value: 6842, change: 8, unit: '/day' },
        streak: { value: 14, change: 0, unit: 'days' },
        activeDays: { value: 22, change: 15, unit: 'of 31' },
      },
      goals: [
        {
          id: 'muscle',
          name: 'Build Muscle',
          icon: 'Dumbbell',
          status: 'needs-attention',
          statusLabel: 'Needs attention',
          progress: 15,
          insight: "Progress has stalled. No strength training sessions were logged this month. Your body needs resistance exercise to trigger muscle growth‚Äîright now, that signal is absent.",
          scienceFact: "Muscle protein synthesis peaks 24-48 hours after resistance training. Without regular stimulus, you miss this growth window.",
        },
        {
          id: 'energy',
          name: 'Boost Energy',
          icon: 'Zap',
          status: 'improving',
          statusLabel: 'Improving',
          progress: 65,
          insight: "Your energy patterns are improving! Morning activities are up 20%, and you're moving more consistently throughout the day.",
          scienceFact: "Regular movement increases mitochondrial density, giving your cells more energy-producing power plants.",
        },
        {
          id: 'sleep',
          name: 'Better Sleep',
          icon: 'Moon',
          status: 'on-track',
          statusLabel: 'On track',
          progress: 78,
          insight: "Sleep quality has improved. Your evening wind-down routine is helping‚Äîkeep it consistent for best results.",
          scienceFact: "Deep sleep is when your body repairs tissue and consolidates memory. Consistency in bedtime improves deep sleep duration.",
        },
      ],
      inspiration: {
        message: "The next step is simple: act on the basics, one small habit at a time. Even one strength session or a few logged meals can restart your momentum. This journey isn't about perfection‚Äîit's about progress.",
        tips: [
          { goal: 'Build Muscle', tip: "Start with just 2 strength sessions this week. Even 15-minute bodyweight workouts trigger muscle protein synthesis.", icon: 'Dumbbell' },
          { goal: 'Boost Energy', tip: "Keep your morning movement streak going! Try adding a 5-minute afternoon walk to beat the 3pm slump.", icon: 'Zap' },
          { goal: 'Better Sleep', tip: "You're doing great with sleep. Consider dimming lights 1 hour before bed to boost melatonin naturally.", icon: 'Moon' },
        ]
      },
      achievements: [
        { id: 'streak14', label: '14-Day Streak', icon: 'Flame', shareable: true },
        { id: 'steps100k', label: '100K Steps', icon: 'Footprints', shareable: true },
        { id: 'activities50', label: '47 Activities', icon: 'Trophy', shareable: true },
      ]
    };

    // Personalized Plan Data
    const PERSONALIZED_PLAN = {
      month: 'February',
      focusAreas: [
        { id: 'muscle', name: 'Build Muscle', icon: 'Dumbbell', priority: 'high' },
        { id: 'energy', name: 'Boost Energy', icon: 'Zap', priority: 'medium' },
      ],
      weeklyTargets: [
        { label: 'Strength sessions', target: 2, icon: 'Dumbbell' },
        { label: 'Daily steps', target: '7,500', icon: 'Footprints' },
        { label: 'Sleep before 11pm', target: '5 nights', icon: 'Moon' },
        { label: 'Hydration check-ins', target: 4, icon: 'Droplet' },
      ],
      starterPlan: [
        {
          day: 'Monday',
          activities: [
            { title: '15-min bodyweight workout', time: 'Morning', icon: 'Dumbbell', isNew: true },
            { title: '10-min walk', time: 'After lunch', icon: 'Footprints', isNew: false },
            { title: 'Evening wind-down', time: '10pm', icon: 'Moon', isNew: false },
          ]
        },
        {
          day: 'Tuesday',
          activities: [
            { title: 'Morning stretch', time: 'Morning', icon: 'Heart', isNew: false },
            { title: '15-min walk', time: 'After lunch', icon: 'Footprints', isNew: false },
            { title: 'Box breathing', time: 'Afternoon', icon: 'Wind', isNew: false },
          ]
        },
        {
          day: 'Wednesday',
          activities: [
            { title: '15-min bodyweight workout', time: 'Morning', icon: 'Dumbbell', isNew: true },
            { title: '10-min walk', time: 'After lunch', icon: 'Footprints', isNew: false },
          ]
        },
      ],
      scienceTip: {
        title: "Why 2 strength sessions?",
        content: "Research shows that training each muscle group twice per week optimizes muscle protein synthesis. Starting with 2 sessions builds the habit while giving your body adequate recovery time between workouts."
      }
    };

    // =============================================
    // PAGE 1: SUMMARY OVERVIEW (LIGHT)
    // =============================================
    function Page1Summary({ data, onShare }) {
      return (
        <div className="min-h-screen bg-gradient-to-b from-lemon-50 via-warm-50 to-white px-5 pt-16 pb-24">
          {/* Celebration header */}
          <div className="text-center mb-8 slide-up">
            <div className="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-lemon-400 to-amber-400 rounded-2xl mb-4 shadow-lg shadow-lemon-200">
              <span className="text-3xl">üçã</span>
            </div>
            <h1 className="text-2xl font-bold text-gray-800 mb-2">
              You crushed it in {data.month}!
            </h1>
            <p className="text-gray-500">Here's what that looked like</p>
          </div>

          {/* Main stats grid */}
          <div className="grid grid-cols-2 gap-3 mb-6">
            <StatCard
              label="Activities"
              value={data.stats.activities.value}
              change={data.stats.activities.change}
              unit={data.stats.activities.unit}
              delay={0}
              large
            />
            <StatCard
              label="Avg Steps"
              value={data.stats.avgSteps.value.toLocaleString()}
              change={data.stats.avgSteps.change}
              unit={data.stats.avgSteps.unit}
              delay={1}
              large
            />
            <StatCard
              label="Best Streak"
              value={data.stats.streak.value}
              unit={data.stats.streak.unit}
              icon="Flame"
              delay={2}
            />
            <StatCard
              label="Active Days"
              value={data.stats.activeDays.value}
              change={data.stats.activeDays.change}
              unit={data.stats.activeDays.unit}
              delay={3}
            />
          </div>

          {/* Activity calendar heatmap */}
          <div className="bg-white rounded-2xl p-4 mb-6 border border-gray-100 shadow-sm slide-up-delay-3">
            <div className="flex items-center justify-between mb-3">
              <span className="text-sm font-medium text-gray-700">Activity heatmap</span>
              <span className="text-xs text-gray-400">{data.month} 2026</span>
            </div>
            <ActivityHeatmap />
          </div>

          {/* Achievements */}
          <div className="slide-up-delay-4">
            <div className="flex items-center justify-between mb-3">
              <span className="text-sm font-semibold text-gray-800">Achievements unlocked</span>
              <button
                onClick={onShare}
                className="flex items-center gap-1.5 text-xs text-sage-600 font-medium"
              >
                <Icons.Share /> Share
              </button>
            </div>
            <div className="flex gap-3 overflow-x-auto hide-scrollbar -mx-5 px-5 pb-2">
              {data.achievements.map((achievement, idx) => (
                <AchievementBadge key={achievement.id} achievement={achievement} delay={idx} />
              ))}
            </div>
          </div>
        </div>
      );
    }

    function StatCard({ label, value, change, unit, icon, delay, large }) {
      const IconComponent = icon ? Icons[icon] : null;
      const isPositive = change > 0;

      return (
        <div className={`bg-white rounded-2xl p-4 border border-gray-100 shadow-sm pop-delay-${delay}`}>
          <p className="text-xs text-gray-500 mb-2">{label}</p>
          <div className="flex items-end gap-2">
            {IconComponent && (
              <span className="text-amber-500 mb-1"><IconComponent /></span>
            )}
            <span className={`font-bold text-gray-800 number-pop ${large ? 'text-3xl' : 'text-2xl'}`}>
              {value}
            </span>
            {unit && <span className="text-gray-400 text-sm mb-1">{unit}</span>}
          </div>
          {change !== undefined && change !== 0 && (
            <div className={`flex items-center gap-1 mt-2 ${isPositive ? 'text-green-600' : 'text-red-500'}`}>
              {isPositive ? <Icons.TrendingUp /> : <Icons.TrendingDown />}
              <span className="text-xs font-medium">{isPositive ? '+' : ''}{change}% vs last month</span>
            </div>
          )}
        </div>
      );
    }

    function ActivityHeatmap() {
      const days = Array.from({ length: 31 }, (_, i) => ({
        day: i + 1,
        level: Math.random() > 0.3 ? Math.floor(Math.random() * 4) + 1 : 0
      }));

      const getColor = (level) => {
        const colors = ['bg-gray-100', 'bg-sage-100', 'bg-sage-200', 'bg-sage-300', 'bg-sage-400'];
        return colors[level] || colors[0];
      };

      return (
        <div className="grid grid-cols-7 gap-1.5">
          {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map((d, i) => (
            <div key={i} className="text-center text-xs text-gray-400 mb-1">{d}</div>
          ))}
          {[...Array(3)].map((_, i) => <div key={`empty-${i}`} />)}
          {days.map((day) => (
            <div
              key={day.day}
              className={`aspect-square rounded-sm ${getColor(day.level)}`}
            />
          ))}
        </div>
      );
    }

    function AchievementBadge({ achievement, delay }) {
      const IconComponent = Icons[achievement.icon];
      return (
        <div className={`flex-shrink-0 bg-gradient-to-br from-lemon-50 to-amber-50 rounded-2xl p-4 border border-lemon-200 pop-delay-${delay}`}>
          <div className="w-12 h-12 bg-gradient-to-br from-lemon-400 to-amber-400 rounded-xl flex items-center justify-center mb-2 shadow-sm">
            <span className="text-white"><IconComponent /></span>
          </div>
          <p className="text-gray-800 text-sm font-medium whitespace-nowrap">{achievement.label}</p>
        </div>
      );
    }

    // =============================================
    // PAGE 2: GOAL PROGRESS (LIGHT)
    // =============================================
    function Page2Progress({ data }) {
      const [expandedGoal, setExpandedGoal] = useState(null);

      return (
        <div className="min-h-screen bg-gradient-to-b from-sage-50 via-warm-50 to-white px-5 pt-16 pb-24">
          <div className="mb-6 slide-up">
            <h1 className="text-2xl font-bold text-gray-800 mb-2">Your goals in {data.month}</h1>
            <p className="text-gray-500">Progress and insights based on your data</p>
          </div>

          <div className="space-y-3">
            {data.goals.map((goal, idx) => (
              <GoalCard
                key={goal.id}
                goal={goal}
                expanded={expandedGoal === goal.id}
                onToggle={() => setExpandedGoal(expandedGoal === goal.id ? null : goal.id)}
                delay={idx}
              />
            ))}
          </div>
        </div>
      );
    }

    function GoalCard({ goal, expanded, onToggle, delay }) {
      const IconComponent = Icons[goal.icon];

      const statusColors = {
        'on-track': 'bg-green-100 text-green-700 border-green-200',
        'improving': 'bg-blue-100 text-blue-700 border-blue-200',
        'steady': 'bg-gray-100 text-gray-600 border-gray-200',
        'needs-attention': 'bg-amber-100 text-amber-700 border-amber-200',
      };

      const progressColors = {
        'on-track': 'bg-green-500',
        'improving': 'bg-blue-500',
        'steady': 'bg-gray-400',
        'needs-attention': 'bg-amber-500',
      };

      const iconBgColors = {
        'on-track': 'bg-green-100 text-green-600',
        'improving': 'bg-blue-100 text-blue-600',
        'steady': 'bg-gray-100 text-gray-600',
        'needs-attention': 'bg-amber-100 text-amber-600',
      };

      return (
        <div className={`bg-white rounded-2xl overflow-hidden border border-gray-100 shadow-sm slide-up-delay-${Math.min(delay, 4)}`}>
          <button
            onClick={onToggle}
            className="w-full p-4 flex items-center gap-3 text-left"
          >
            <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${iconBgColors[goal.status]}`}>
              <IconComponent />
            </div>
            <div className="flex-1">
              <div className="flex items-center gap-2 mb-1.5">
                <span className="text-gray-800 font-medium">{goal.name}</span>
                <span className={`text-xs px-2 py-0.5 rounded-full border ${statusColors[goal.status]}`}>
                  {goal.statusLabel}
                </span>
              </div>
              <div className="w-full h-2 bg-gray-100 rounded-full overflow-hidden">
                <div
                  className={`h-full rounded-full ${progressColors[goal.status]} transition-all duration-500`}
                  style={{ width: `${goal.progress}%` }}
                />
              </div>
            </div>
            <span className={`text-gray-400 transition-transform ${expanded ? 'rotate-90' : ''}`}>
              <Icons.ChevronRight />
            </span>
          </button>

          {expanded && (
            <div className="px-4 pb-4 pt-0 fade-in">
              <div className="bg-gray-50 rounded-xl p-4 mb-3">
                <p className="text-gray-700 text-sm leading-relaxed">{goal.insight}</p>
              </div>

              <div className="flex items-start gap-2 bg-sage-50 rounded-xl p-3 border border-sage-100">
                <span className="text-sage-500 mt-0.5"><Icons.Sparkles /></span>
                <div>
                  <p className="text-xs text-sage-600 font-medium mb-1">Science insight</p>
                  <p className="text-xs text-gray-600 leading-relaxed">{goal.scienceFact}</p>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }

    // =============================================
    // PAGE 3: INSPIRATION (LIGHT)
    // =============================================
    function Page3Inspiration({ data, onViewPlan }) {
      return (
        <div className="min-h-screen bg-gradient-to-b from-sage-50 via-warm-50 to-white px-5 pt-16 pb-24">
          <div className="mb-6 slide-up">
            <div className="inline-flex items-center justify-center w-12 h-12 bg-sage-100 rounded-xl mb-4">
              <span className="text-sage-500"><Icons.Sparkles /></span>
            </div>
            <h1 className="text-2xl font-bold text-gray-800 mb-2">
              Fresh inspiration for {data.nextMonth}
            </h1>
          </div>

          {/* Main encouragement */}
          <div className="bg-gradient-to-br from-sage-100 to-sage-50 rounded-2xl p-5 mb-6 border border-sage-200 slide-up-delay-1">
            <p className="text-gray-700 leading-relaxed">{data.inspiration.message}</p>
          </div>

          {/* Goal-specific tips */}
          <div className="space-y-3 mb-8">
            {data.inspiration.tips.map((tip, idx) => (
              <TipCard key={idx} tip={tip} delay={idx + 2} />
            ))}
          </div>

          {/* CTA */}
          <div className="slide-up-delay-4">
            <button
              onClick={onViewPlan}
              className="w-full py-4 bg-sage-500 text-white rounded-2xl font-semibold flex items-center justify-center gap-2 shadow-lg shadow-sage-200"
            >
              See your {data.nextMonth} plan <Icons.ArrowRight />
            </button>
            <p className="text-center text-gray-400 text-xs mt-3">
              Personalized based on your January data
            </p>
          </div>
        </div>
      );
    }

    function TipCard({ tip, delay }) {
      const IconComponent = Icons[tip.icon];

      return (
        <div className={`bg-white rounded-2xl p-4 border border-gray-100 shadow-sm slide-up-delay-${Math.min(delay, 4)}`}>
          <div className="flex items-start gap-3">
            <div className="w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center text-gray-600 flex-shrink-0">
              <IconComponent />
            </div>
            <div>
              <p className="text-gray-800 font-medium text-sm mb-1">{tip.goal}</p>
              <p className="text-gray-500 text-sm leading-relaxed">{tip.tip}</p>
            </div>
          </div>
        </div>
      );
    }

    // =============================================
    // PAGE 4: PERSONALIZED PLAN
    // =============================================
    function Page4PersonalizedPlan({ plan, onBack }) {
      return (
        <div className="min-h-screen bg-gradient-to-b from-warm-50 to-white px-5 pt-16 pb-24">
          {/* Header */}
          <div className="mb-6 slide-up">
            <div className="flex items-center gap-2 mb-2">
              <span className="text-sage-500"><Icons.Calendar /></span>
              <span className="text-sm text-sage-600 font-medium">{plan.month} Plan</span>
            </div>
            <h1 className="text-2xl font-bold text-gray-800 mb-2">
              Your personalized plan
            </h1>
            <p className="text-gray-500">Based on your January progress and goals</p>
          </div>

          {/* Focus Areas */}
          <div className="mb-6 slide-up-delay-1">
            <h2 className="text-sm font-semibold text-gray-700 mb-3">Priority focus areas</h2>
            <div className="flex gap-3">
              {plan.focusAreas.map(area => {
                const IconComponent = Icons[area.icon];
                return (
                  <div
                    key={area.id}
                    className={`flex-1 p-4 rounded-2xl border ${
                      area.priority === 'high'
                        ? 'bg-amber-50 border-amber-200'
                        : 'bg-blue-50 border-blue-200'
                    }`}
                  >
                    <div className={`w-10 h-10 rounded-xl flex items-center justify-center mb-2 ${
                      area.priority === 'high'
                        ? 'bg-amber-100 text-amber-600'
                        : 'bg-blue-100 text-blue-600'
                    }`}>
                      <IconComponent />
                    </div>
                    <p className="font-medium text-gray-800 text-sm">{area.name}</p>
                    <p className={`text-xs ${area.priority === 'high' ? 'text-amber-600' : 'text-blue-600'}`}>
                      {area.priority === 'high' ? 'Top priority' : 'Keep momentum'}
                    </p>
                  </div>
                );
              })}
            </div>
          </div>

          {/* Weekly Targets */}
          <div className="mb-6 slide-up-delay-2">
            <h2 className="text-sm font-semibold text-gray-700 mb-3">Weekly targets</h2>
            <div className="bg-white rounded-2xl border border-gray-100 overflow-hidden">
              {plan.weeklyTargets.map((target, idx) => {
                const IconComponent = Icons[target.icon];
                return (
                  <div
                    key={idx}
                    className={`flex items-center gap-3 p-4 ${idx !== plan.weeklyTargets.length - 1 ? 'border-b border-gray-50' : ''}`}
                  >
                    <div className="w-8 h-8 bg-sage-100 rounded-lg flex items-center justify-center text-sage-600">
                      <IconComponent />
                    </div>
                    <span className="flex-1 text-gray-700 text-sm">{target.label}</span>
                    <span className="text-sage-600 font-semibold">{target.target}</span>
                  </div>
                );
              })}
            </div>
          </div>

          {/* Starter Plan */}
          <div className="mb-6 slide-up-delay-3">
            <h2 className="text-sm font-semibold text-gray-700 mb-3">Your starter week</h2>
            <div className="space-y-3">
              {plan.starterPlan.map((day, dayIdx) => (
                <div key={dayIdx} className="bg-white rounded-2xl border border-gray-100 p-4">
                  <p className="font-semibold text-gray-800 mb-3">{day.day}</p>
                  <div className="space-y-2">
                    {day.activities.map((activity, actIdx) => {
                      const IconComponent = Icons[activity.icon];
                      return (
                        <div key={actIdx} className="flex items-center gap-3">
                          <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${
                            activity.isNew ? 'bg-lemon-100 text-amber-600' : 'bg-gray-100 text-gray-500'
                          }`}>
                            <IconComponent />
                          </div>
                          <div className="flex-1">
                            <div className="flex items-center gap-2">
                              <span className="text-sm text-gray-800">{activity.title}</span>
                              {activity.isNew && (
                                <span className="text-xs bg-lemon-100 text-amber-700 px-1.5 py-0.5 rounded font-medium">New</span>
                              )}
                            </div>
                            <span className="text-xs text-gray-400">{activity.time}</span>
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Science Tip */}
          <div className="bg-sage-50 rounded-2xl p-4 border border-sage-100 mb-6 slide-up-delay-4">
            <div className="flex items-start gap-3">
              <span className="text-sage-500 mt-0.5"><Icons.Sparkles /></span>
              <div>
                <p className="font-medium text-sage-700 text-sm mb-1">{plan.scienceTip.title}</p>
                <p className="text-gray-600 text-sm leading-relaxed">{plan.scienceTip.content}</p>
              </div>
            </div>
          </div>

          {/* CTA */}
          <button className="w-full py-4 bg-sage-500 text-white rounded-2xl font-semibold shadow-lg shadow-sage-200">
            Start {plan.month}
          </button>
        </div>
      );
    }

    // =============================================
    // SHARE MODAL (LIGHT)
    // =============================================
    function ShareModal({ data, onClose }) {
      const [selectedAchievement, setSelectedAchievement] = useState(data.achievements[0]?.id);

      return (
        <div className="fixed inset-0 bg-black/40 flex items-end justify-center z-50 fade-in" onClick={onClose}>
          <div
            className="bg-white rounded-t-3xl w-full max-w-md p-5 pb-8 slide-up"
            onClick={e => e.stopPropagation()}
          >
            <div className="flex items-center justify-between mb-6">
              <h3 className="text-lg font-semibold text-gray-800">Share your progress</h3>
              <button onClick={onClose} className="text-gray-400"><Icons.X /></button>
            </div>

            {/* Preview card */}
            <div className="bg-gradient-to-br from-lemon-50 to-amber-50 rounded-2xl p-5 mb-6 border border-lemon-200">
              <div className="flex items-center gap-2 mb-4">
                <span className="text-sage-500"><Icons.Leaf /></span>
                <span className="text-gray-800 font-medium">Lemon</span>
              </div>
              <div className="text-center py-4">
                <div className="text-4xl mb-2">üî•</div>
                <p className="text-3xl font-bold gradient-text mb-1">14 Day Streak!</p>
                <p className="text-gray-500 text-sm">Building healthy habits in {data.month}</p>
              </div>
            </div>

            {/* Achievement selector */}
            <div className="flex gap-2 mb-6 overflow-x-auto hide-scrollbar">
              {data.achievements.map(achievement => (
                <button
                  key={achievement.id}
                  onClick={() => setSelectedAchievement(achievement.id)}
                  className={`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-colors ${
                    selectedAchievement === achievement.id
                      ? 'bg-sage-500 text-white'
                      : 'bg-gray-100 text-gray-600'
                  }`}
                >
                  {achievement.label}
                </button>
              ))}
            </div>

            {/* Share buttons */}
            <div className="grid grid-cols-2 gap-3">
              <button className="py-3 bg-gray-100 rounded-xl text-gray-800 font-medium flex items-center justify-center gap-2">
                <span className="text-lg">üì±</span> Stories
              </button>
              <button className="py-3 bg-gray-100 rounded-xl text-gray-800 font-medium flex items-center justify-center gap-2">
                <span className="text-lg">üí¨</span> Message
              </button>
            </div>
          </div>
        </div>
      );
    }

    // =============================================
    // MAIN APP
    // =============================================
    function App() {
      const [currentPage, setCurrentPage] = useState(1);
      const [showShare, setShowShare] = useState(false);

      const totalPages = 4;

      const nextPage = () => {
        if (currentPage < totalPages) setCurrentPage(currentPage + 1);
      };

      const prevPage = () => {
        if (currentPage > 1) setCurrentPage(currentPage - 1);
      };

      return (
        <div className="max-w-md mx-auto relative min-h-screen">
          {/* Header */}
          <div className="fixed top-0 left-0 right-0 z-40 max-w-md mx-auto">
            <div className="flex items-center justify-between px-5 pt-4 pb-2 bg-gradient-to-b from-white to-transparent">
              <button className="text-gray-400 w-8" onClick={() => currentPage > 1 ? prevPage() : null}>
                {currentPage > 1 ? <Icons.ChevronLeft /> : <Icons.X />}
              </button>

              {/* Page indicators */}
              <div className="flex gap-2">
                {[1, 2, 3, 4].map(page => (
                  <button
                    key={page}
                    onClick={() => setCurrentPage(page)}
                    className={`h-1.5 rounded-full transition-all ${
                      currentPage === page ? 'w-6 bg-sage-500' : 'w-1.5 bg-gray-300'
                    }`}
                  />
                ))}
              </div>

              <button
                onClick={() => setShowShare(true)}
                className="text-gray-400 w-8"
              >
                <Icons.Share />
              </button>
            </div>
          </div>

          {/* Pages */}
          <div className="fade-in" key={currentPage}>
            {currentPage === 1 && (
              <Page1Summary data={SUMMARY_DATA} onShare={() => setShowShare(true)} />
            )}
            {currentPage === 2 && (
              <Page2Progress data={SUMMARY_DATA} />
            )}
            {currentPage === 3 && (
              <Page3Inspiration data={SUMMARY_DATA} onViewPlan={nextPage} />
            )}
            {currentPage === 4 && (
              <Page4PersonalizedPlan plan={PERSONALIZED_PLAN} onBack={prevPage} />
            )}
          </div>

          {/* Navigation */}
          {currentPage < 4 && (
            <div className="fixed bottom-0 left-0 right-0 z-40 max-w-md mx-auto">
              <div className="flex items-center justify-between px-5 py-4 bg-gradient-to-t from-white via-white/90 to-transparent">
                <button
                  onClick={prevPage}
                  disabled={currentPage === 1}
                  className={`flex items-center gap-1 text-sm font-medium ${
                    currentPage === 1 ? 'text-gray-300' : 'text-gray-500'
                  }`}
                >
                  <Icons.ChevronLeft /> Back
                </button>

                <span className="text-gray-400 text-sm">{currentPage} of {totalPages}</span>

                <button
                  onClick={nextPage}
                  className="flex items-center gap-1 text-sm font-medium text-sage-600"
                >
                  Next <Icons.ChevronRight />
                </button>
              </div>
            </div>
          )}

          {/* Share Modal */}
          {showShare && (
            <ShareModal data={SUMMARY_DATA} onClose={() => setShowShare(false)} />
          )}
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
